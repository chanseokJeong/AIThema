# 티마 vs 현재 시스템 간극 분석

## 🔍 사례 연구: "고영" 종목이 누락된 이유

### 티마의 로봇 테마 (15.56점)
```
1. 당글로누드: 29.52%
2. 스벡: 21.20%
3. 로보스타: 7.73%
4. 고영: 3.78% ⭐
```

### 우리의 로봇 테마 (0점)
```
1. 레인보우로보틱스: 0%
2. 두산로보틱스: 0%
3. 로보티즈: 0%
```

---

## ❌ 3가지 근본적 차이

### 1. 뉴스 소스

**티마:**
- 이투데이: https://www.etoday.co.kr/news/view/2531740
  - 제목: "K-피지컬 AI, 3대 틈새 '로봇·센서·소프트웨어'"
  - 본문에서 관련 기업 추출: 고영, 스벡, 당글로누드 등
- 한국경제
- 매일경제
- 네이버 금융

**우리:**
- 네이버 금융 "특징주" 섹션만
- 결과: 이투데이 뉴스 완전 누락 ❌

### 2. 종목 발굴 방식

**티마 (뉴스 기반):**
```
Step 1: 다양한 소스에서 뉴스 수집
Step 2: 뉴스 본문 파싱 → 종목명 추출
Step 3: 추출된 종목의 시세 직접 조회
Step 4: 관련 종목 그룹핑 → 테마 생성
```

**우리 (급등주 기반):**
```
Step 1: 네이버 "급등주" 페이지 크롤링
Step 2: 거기 없으면 끝
Step 3: 업종 크롤러로 보완 시도 (하지만 "고영" 발견 못 함)
```

**결과:**
- "고영"이 네이버 급등주 상위 100개에 없음 (3.78%로 낮은 등락률)
- 업종 크롤러도 찾지 못함 (등락률 필터 2%에 걸림)
- → 완전 누락 ❌

### 3. 뉴스와 종목의 연결

**티마:**
```
뉴스: "K-피지컬 AI, 3대 틈새 '로봇·센서·소프트웨어'"
↓
종목 추출: 고영, 스벡, 당글로누드
↓
시세 조회: 3.78%, 21.20%, 29.52%
↓
테마 생성: 로봇 (15.56점)
```

**우리:**
```
뉴스: 제목만 AI에 전달
↓
AI가 "로봇" 테마 인식
↓
하드코딩된 종목: 레인보우로보틱스, 두산로보틱스, 로보티즈
↓
시세 조회: 0%, 0%, 0%
↓
테마 생성: 로봇 (0점)
```

---

## 💡 해결책

### 우선순위 1: 뉴스 기반 종목 추출 ⭐⭐⭐⭐⭐

**구현:**
```javascript
// 1. 다양한 뉴스 소스 크롤링
const news = await fetchDiverseNews(); // 이투데이, 한경, 매경

// 2. 뉴스 본문에서 종목명 추출
const stocks = await extractStocksFromNews(news);
// → "고영", "스벡", "당글로누드" 추출

// 3. 추출된 종목의 시세 조회
for (const stockName of stocks) {
    const price = await fetchStockPrice(stockName);
    // → 고영: 3.78%
}
```

**효과:**
- "고영" 같은 숨은 종목 발견 ✅
- 뉴스와 종목 1:1 매칭 ✅
- 등락률 무관하게 관련 종목 포함 ✅

**단점:**
- 각 뉴스 본문을 읽어야 하므로 시간 소요 (10-20초)
- API 호출 증가

### 우선순위 2: 업종 크롤러 개선 ⭐⭐⭐

**현재 문제:**
- 등락률 2% 필터링 → "고영"(3.78%) 누락

**해결:**
- 등락률 필터를 0%로 낮춤
- 업종에 속하면 무조건 포함

### 우선순위 3: AI에게 종목 추출 요청 ⭐⭐

**현재:**
- AI에게 뉴스 제목만 전달

**개선:**
- AI에게 뉴스 전체 텍스트 전달
- "이 뉴스에서 언급된 모든 종목을 추출하세요" 프롬프트 추가

---

## 📊 예상 개선 효과

### Before (현재)
```
로봇 테마: 0점
- 레인보우로보틱스: 0%
- 두산로보틱스: 0%
- 로보티즈: 0%
```

### After (뉴스 기반 추출 적용)
```
로봇 테마: 15-20점 (티마와 유사)
- 당글로누드: 29.52%
- 스벡: 21.20%
- 로보스타: 7.73%
- 고영: 3.78%
```

---

## 🚨 현실적 제약

### 시간 비용
- 뉴스 10개 본문 크롤링: 5-10초
- 종목 10개 시세 조회: 3-5초
- 총 8-15초 추가 소요

### API 부하
- 뉴스 사이트 크롤링 증가
- 차단 위험 증가

### 해결책
- 캐싱 강화
- 병렬 처리
- 주요 뉴스만 선별 (상위 5-10개)

---

## 🎯 즉시 적용 가능한 임시 방안

### 하드코딩으로 "고영" 추가
```javascript
const SECTOR_CODES = {
    '로봇': {
        codes: ['020', '021', '026', '229'],
        stocks: ['레인보우로보틱스', '두산로보틱스', '로보티즈',
                 '고영', '스벡', '당글로누드', '로보스타'] // ⭐ 추가
    }
}
```

**효과:**
- 즉시 적용 가능
- "고영"이 강제 포함됨

**한계:**
- 여전히 시세 조회 문제
- 새로운 급등주는 여전히 놓침

---

## 🏁 최종 권장 사항

1. **단기 (오늘 적용):**
   - 하드코딩으로 주요 종목 추가
   - 등락률 필터 완화 (2% → 0%)

2. **중기 (1주일):**
   - 뉴스 기반 종목 추출 시스템 구축
   - 이투데이, 한경 등 추가 소스 연결

3. **장기 (1개월):**
   - AI 기반 종목명 추출
   - 실시간 뉴스 모니터링
